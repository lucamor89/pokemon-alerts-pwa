<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a202c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Pok√©mon Stock Alerts</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="apple-touch-startup-image" href="splash.jpg">
</head>
<body>
    <!-- Custom Splash Screen (works on Android) -->
    <div id="customSplash" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: #000000;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999999;
        opacity: 1;
        transition: opacity 0.5s ease;
    ">
        <img src="splash.jpg" alt="Pok√©mon Stock Alerts" style="
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
        ">
    </div>

    <!-- Context Menu (Long-Press) -->
    <div id="contextMenu" class="context-menu hidden" onclick="closeContextMenu()">
        <div class="context-menu-content" onclick="event.stopPropagation()">
            <div class="context-menu-header">
                <h3 id="contextMenuTitle">Options</h3>
            </div>
            <div id="contextMenuOptions">
                <!-- Options will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Settings</h2>
                <button class="close-btn" onclick="closeSettings()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <span>Theme</span>
                    <div class="theme-control">
                        <span id="themeLabel" class="theme-label">Dark</span>
                        <label class="theme-switch">
                            <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
                            <span class="theme-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item disabled">
                    <span>üîî Push Notifications</span>
                    <span class="setting-value">Coming Soon</span>
                </div>
                <div class="setting-item" onclick="clearHistory()">
                    <span>üóëÔ∏è Clear History</span>
                    <span class="setting-value">‚Üí</span>
                </div>
                <div class="setting-item">
                    <span>‚ÑπÔ∏è Version</span>
                    <span class="setting-value">1.0.3</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="modal hidden" onclick="closeSearch()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <input type="text" id="searchInput" placeholder="Search products or type /unread /pinned..." class="search-input">
                <button class="close-btn" onclick="closeSearch()">‚úï</button>
            </div>
            <div class="modal-body" id="searchResults">
                <!-- Search results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app">
        <!-- Home Screen -->
        <div id="homeScreen" class="screen active">
            <header class="app-header">
                <div class="header-left">
                    <button class="icon-btn" onclick="openSettings()">‚öôÔ∏è</button>
                    <h1 class="app-title">Pok√©mon Stock Alerts</h1>
                </div>
                <div class="header-right">
                    <div id="headerSpinner" class="header-spinner hidden">
                        <div class="spinner-small"></div>
                    </div>
                    <button class="icon-btn" onclick="openSearch()">üîç</button>
                </div>
            </header>

            <div class="content" id="categoryList">
                <!-- Categories will be populated here -->
            </div>
        </div>

        <!-- Category Feed Screen -->
        <div id="categoryScreen" class="screen">
            <header class="app-header">
                <div class="header-left">
                    <button class="icon-btn" onclick="openSettings()">‚öôÔ∏è</button>
                    <button class="icon-btn" onclick="goHome()">‚Üê</button>
                    <h1 class="app-title" id="categoryTitle">Category</h1>
                </div>
                <div class="header-right">
                    <div id="headerSpinner" class="header-spinner hidden">
                        <div class="spinner-small"></div>
                    </div>
                    <button class="icon-btn" onclick="openSearch()">üîç</button>
                </div>
            </header>

            <div class="content" id="notificationFeed">
                <!-- Notifications will be populated here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Splash Screen Logic -->
    <script>
        // Hide splash screen after app loads
        window.addEventListener('DOMContentLoaded', () => {
            const splash = document.getElementById('customSplash');
            console.log('[Splash] DOMContentLoaded - Splash element:', splash);
            
            if (splash) {
                // Ensure splash is visible
                splash.style.display = 'flex';
                splash.style.opacity = '1';
                console.log('[Splash] Splash is visible');
                
                // Hide after 2.5 seconds
                setTimeout(() => {
                    console.log('[Splash] Starting fade out');
                    splash.style.opacity = '0';
                    setTimeout(() => {
                        splash.style.display = 'none';
                        console.log('[Splash] Splash hidden');
                    }, 500); // Wait for fade animation
                }, 2500); // Show splash for 2.5 seconds
            } else {
                console.error('[Splash] Splash element not found!');
            }
        });
    </script>

    <script src="app.js"></script>
</body>
</html>
