<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a202c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Pokémon Stock Alerts</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="apple-touch-startup-image" href="splash.jpg">
</head>
<body>
    <!-- Custom Splash Screen (works on Android) -->
    <div id="customSplash" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: #000000;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999999;
        opacity: 1;
        transition: opacity 0.5s ease;
    ">
        <img src="splash.jpg" alt="Pokémon Stock Alerts" style="
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
        ">
    </div>

    <!-- Context Menu (Long-Press) -->
    <div id="contextMenu" class="context-menu hidden" onclick="closeContextMenu()">
        <div class="context-menu-content" onclick="event.stopPropagation()">
            <div class="context-menu-header">
                <h3 id="contextMenuTitle">Options</h3>
            </div>
            <div id="contextMenuOptions">
                <!-- Options will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <svg class="icon-svg" style="vertical-align: middle; margin-right: 8px;" viewBox="0 0 24 24"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                    Settings
                </h2>
                <button class="close-btn" onclick="closeSettings()">✕</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <span>Theme</span>
                    <div class="theme-control">
                        <span id="themeLabel" class="theme-label">Dark</span>
                        <label class="theme-switch">
                            <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
                            <span class="theme-slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item disabled">
                    <span>
                        <svg class="icon-svg inline-icon" viewBox="0 0 24 24"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
                        Push Notifications
                    </span>
                    <span class="setting-value">Coming Soon</span>
                </div>
                <div class="setting-item" onclick="clearHistory()">
                    <span>
                        <svg class="icon-svg inline-icon" viewBox="0 0 24 24"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
                        Clear History
                    </span>
                    <span class="setting-value">→</span>
                </div>
                <div class="setting-item">
                    <span>
                        <svg class="icon-svg inline-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                        Version
                    </span>
                    <span class="setting-value">1.0.3</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="modal hidden" onclick="closeSearch()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <input type="text" id="searchInput" placeholder="Search products or type /unread /pinned..." class="search-input">
                <button class="close-btn" onclick="closeSearch()">✕</button>
            </div>
            <div class="modal-body" id="searchResults">
                <!-- Search results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app">
        <!-- Home Screen -->
        <div id="homeScreen" class="screen active">
            <header class="app-header">
                <div class="header-left">
                    <button class="icon-btn" onclick="openSettings()">
                        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                    </button>
                    <h1 class="app-title">Pokémon Stock Alerts</h1>
                </div>
                <div class="header-right">
                    <div id="headerSpinner" class="header-spinner hidden">
                        <div class="spinner-small"></div>
                    </div>
                    <button class="icon-btn" onclick="openSearch()">
                        <svg class="icon-svg" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    </button>
                </div>
            </header>

            <div class="content" id="categoryList">
                <!-- Categories will be populated here -->
            </div>
        </div>

        <!-- Category Feed Screen -->
        <div id="categoryScreen" class="screen">
            <header class="app-header">
                <div class="header-left">
                    <button class="icon-btn" onclick="openSettings()">
                        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                    </button>
                    <button class="icon-btn" onclick="goHome()">←</button>
                    <h1 class="app-title" id="categoryTitle">Category</h1>
                </div>
                <div class="header-right">
                    <div id="headerSpinner" class="header-spinner hidden">
                        <div class="spinner-small"></div>
                    </div>
                    <button class="icon-btn" onclick="openSearch()">
                        <svg class="icon-svg" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    </button>
                </div>
            </header>

            <div class="content" id="notificationFeed">
                <!-- Notifications will be populated here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Splash Screen Logic -->
    <script>
        // Hide splash screen after app loads
        window.addEventListener('DOMContentLoaded', () => {
            const splash = document.getElementById('customSplash');
            console.log('[Splash] DOMContentLoaded - Splash element:', splash);
            
            if (splash) {
                // Ensure splash is visible
                splash.style.display = 'flex';
                splash.style.opacity = '1';
                console.log('[Splash] Splash is visible');
                
                // Hide after 2.5 seconds
                setTimeout(() => {
                    console.log('[Splash] Starting fade out');
                    splash.style.opacity = '0';
                    setTimeout(() => {
                        splash.style.display = 'none';
                        console.log('[Splash] Splash hidden');
                    }, 500); // Wait for fade animation
                }, 2500); // Show splash for 2.5 seconds
            } else {
                console.error('[Splash] Splash element not found!');
            }
        });
    </script>

    <script src="app.js"></script>
</body>
</html>
